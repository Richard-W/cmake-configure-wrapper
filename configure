#!/bin/sh

CMAKE_ARGUMENTS=""

#Variables of the form SET_* are used to ensure
#that an argument ist not called twice
SET_PREFIX=0

#Read arguments
for arg in $@; do
	#seperate key=value pairs
	arg_name=`echo $arg | cut -d'=' -f1`
	arg_value=`echo $arg | cut -s -d'=' -f2`

	case "$arg_name" in
	"--prefix")
		if [ $SET_PREFIX -eq 0 ]; then
			CMAKE_ARGUMENTS=$CMAKE_ARGUMENTS" -DCMAKE_INSTALL_PREFIX:PATH=$arg_value"
			SET_PREFIX=1
		else
			echo "--prefix used twice. Exiting..."
			exit 1
		fi
		;;
	*)
		echo "Unrecognized argument: $arg_name. Exiting..."
		exit 1
		;;
	esac
done

cmake $CMAKE_ARGUMENTS .
